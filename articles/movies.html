<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Identity service </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Identity service ">
    <meta name="generator" content="docfx 2.56.7.0">
    
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="identity-service">Identity service</h1>

<h2 id="tech-stack">Tech stack</h2>
<ul>
<li>.NET 7</li>
<li>ASP<span>.</span>NET Core Minimal API</li>
<li>Docker</li>
</ul>
<h2 id="main-libraries">Main libraries</h2>
<ul>
<li>Functionality:
<ul>
<li>Dapper</li>
<li>Npgsql</li>
<li>DbUp</li>
</ul>
</li>
</ul>
<h2 id="domain">Domain</h2>
<p>Movies service is designed to manage information about movies, including details about people involved in the movie-making process such as actors, directors, and screenwriters.</p>
<h2 id="architectural-approach">Architectural approach</h2>
<h3 id="experiment">Experiment</h3>
<p>This API looks like a mess at first glance. Although, because this service isn't too complicated, it was decided to treat as an experiment. The clue of it was utilizing some modern .NET features, e.g.:</p>
<ul>
<li>top level statements - no &quot;class Program static void Main&quot; boilerplate code</li>
<li>minimal API - no controllers, direct route mappings</li>
<li>simplified Web API setup - no Program.cs, Startup.cs classes with boilerplate code etc.</li>
</ul>
<p>The main reason was to make development of this service feel like scripting (at least as close to it as it's possible), rather than full-fledged project development.</p>
<p>Writing the code itself felt a lot &quot;simpler&quot; and less demanding in regards of cognitive overload (no directories/files structure). On the other hand, because of the sheer length of Program.cs file, debugging and reading through code actually imposes more cognitive overload at once. It is a tradeoff where one avoids shuffling between multiple files in the project, but he has to scroll through the whole code which results in eyes jumping between all methods and classes.</p>
<p>To conclude the experiment, it had its ups and downs but overall it wasn't so bad. If the development flow and structure would be optimized a bit (to find a middle ground between fully boilerplated code with structure, clean architecture, separation of concerns etc. and one file unorganized script), it could result in a lot easier and more pleasant experience for developers.</p>
<h3 id="description">Description</h3>
<p>Movies service utilizes Minimal API to avoid using controllers. Endpoints are simply delegates associated with a route pattern.</p>
<p>For overall simplicity, service/repository pattern wasn't implemented. Simple repositories with database connection are sufficient.</p>
<h3 id="database-updater">Database updater</h3>
<p>Unrelated to Movies service in terms of code, this service is used for handling SQL scripts/migrations to database using <em>DbUp</em> library. Docker container checks schema state, applies SQL scripts/migrations if needed and exits.</p>
<h2 id="pipelines">Pipelines</h2>
<h3 id="publishing-docker-images">Publishing Docker images</h3>
<p>Publishing pipeline is triggered on pushes to develop (i.e. on merging pull requests). It builds docker image with tags based on commit tags and branch name and publishes it on Docker Hub.</p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/e-library-on-containers/e-library-on-containers/blob/develop/docs/articles/movies.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
